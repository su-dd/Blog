---
title: C++类的基础概念
date: 2023-01-29 16:28:38
permalink: /pages/a8b12f/
categories:
  - C++
  - 基础语法
tags:
  - Class
  - 封装
  - 继承
  - 多态
  - 抽象
  - 类
  - 对象
  - this指针
  - 构造函数
  - 析构函数
---

首先，简单的认知一下类：C++不同于C的一种自定义类型的方式。

类（Class） 是 C++ 和 C 的最重要区别，C++ 的早期命名就是 C with Class。

类的存在给C++ 带来了[面向对象](https://blog.addai.cn/pages/9ac8f7)，封装、继承、多态为类的三大特性。

在学习Class的具体使用方式前，我们必须先对面向对象的核心概念有大致的认知。大家可以通过：

[面向对象的核心概念](https://blog.addai.cn/pages/9ac8f7)：https://blog.addai.cn/pages/9ac8f7 

做一下概要认知，后面再通过代码理解。

<!-- more -->

## 类的封装

**定义：** 将抽象出的 **数据**、**行为** 进行有机结合；隐藏细节，指对外提供特定功能的接口 的动作

封装可以分级向外提供访问权限：public、protected、private。

要完成封装，需要做两件事：

1. 从实体猫中[抽象](https://blog.addai.cn/pages/a8b12f/#%E6%8A%BD%E8%B1%A1) 出我们需要的猫的行为和属性。
   
2. 将抽象的结果，转换为代码：[类](https://blog.addai.cn/pages/a8b12f/#%E7%B1%BB)


### 抽象

定义: 从众多的事物中抽取出共同的、本质性的特征，而舍弃其非本质的特征的过程。
衡量特征是否为本质特征，要看编程的目的。

举例：我们想看关注一群猫吃的动作

这时我们的抽象：

![猫的抽象](https://cdn.addai.cn/博客//202302021210816.png)

当我们只关注猫的吃这个动作时，猫的其他属性和动作对我们而言就没有意义了。

### 类

定义：类是抽象化后的成果。

一般形式：
```cpp
class 类名称
{
public:
  公开的行为定义[函数定义]
protected:
  保护的行为定义[函数定义]
private:
  私有的行为定义[函数定义]
public:
  公开的属性定义[变量定义]
protected:
  保护的属性定义[变量定义]
private:
  私有的属性定义[变量定义]
};		// 一定注意这里有一个`;`，实际编码中常见的错误；会导致一些无法预知的编译错误。
```
**关键字解读：**

> 
> class：类定义关键字
> 
> public、protected、private ：限定函数、属性的使用范围的关键字， 范围 public > protected > private
>
> 范围说明：
> 
> public：类内部可以访问、子类可访问、类外部可访问
>
> protected：类内部可以访问、子类可访问
>
> private：类内部可以访问
>
> *public、protected、private在继承上的使用，呆呆 会在下面 见[继承](https://blog.addai.cn/pages/a8b12f/#继承)中讲解*
> 



例：上面的猫的抽象得到类

```cpp
class Cat   // 声明一个类
{
public:
	void eat()
	{
		cout << "猫:" << num << " 在吃鱼 " << endl;
	}
public:
	int num;
};
```
### 对象

定义：类的实例化结果就是对象。

例：
```cpp
#include <iostream>
#include <cstring>
using namespace std;

class Cat
{
public:
	void eat()
	{
		cout << "猫:" << num << " 在吃鱼 " << endl;
	}
public:
	int num;
};

int main(int argc, char* argv[])
{
	Cat cat;    // 声明一个对象
	cat.num = 1;
	cat.eat();
	return 0;
}
```

结果：
>
> 猫:1 在吃鱼 
>

### this指针

this指针是类的成员函数的一个隐藏参数，处于形参链表的第一位;它指向当前类对象。

例：

```cpp
class Cat
{
public:
	void eat()
	{
		cout << "猫:" << this->num << " 在吃鱼 " << endl;
	}
public:
	int num;
};
```


### 构造函数 & 析构函数

构造和析构是类中两个重要的概念；

**构造函数** ：用于初始化类对象，在对象初始化（new 或 直接对象创建）时调用。
**析构函数** ：用于对象资源释放，在对象释放（delete 或 出作用域时对象直接释放）时调用。

一般形式：
```cpp
class ClassName
{
public:
  ClassName(参数列表) // 函数名 必须同类名
    : 初始化列表      // 在初始化列表阶段，对象内存还没建立完成；this是不存在的
  {
    函数体            // this 可使用
  }

  ~ ClassName()      // 函数名 必须同类名; 同时 在前面加上 `~`
  {
    函数体            // this 可使用
  }
};

```

例：

```cpp
#include <iostream>
#include <cstring>
using namespace std;

class Cat
{
public:
	Cat(int num)
		: m_num(num)
	{
		cout << "猫: " << this->m_num << " 出生了" << endl;
	}

	~Cat()
	{
		cout << "猫: " << this->m_num << " 嗝屁了" << endl;
	}

	void eat()
	{
		cout << "猫: " << this->m_num << " 在吃鱼 " << endl;
	}
public:
	int m_num;
};

int main(int argc, char* argv[])
{
	{ // 添加作用域，让 cat析构
		Cat cat(1);
		cat.eat();
	}

	Cat *pCat = new Cat(2);
	pCat->eat();
	delete pCat;

	return 0;
}
```

结果：
> 猫: 1 出生了
> 
> 猫: 1 在吃鱼 
> 
> 猫: 1 嗝屁了
> 
> 猫: 2 出生了
> 
> 猫: 2 在吃鱼 
> 
> 猫: 2 嗝屁了

## 类的继承

**定义：** 描述父子类的关系，子类继承于父类；子类就是父类的一种特例，子类拥有父类的所有信息

继承的方式一般有：public、protected、private

一般形式：

```cpp
class 子类 : public\protected\private 父类
{
	类实现;
};
```
关键词解释：






## 类的多态

**定义：** 指为不同数据类型的实体提供统一接口，并表现出不同的行为


